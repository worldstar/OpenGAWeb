<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>  
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    var x = [];
    var y = [];
        
    function loadData(){
        fetch('http://localhost:8080/mysite/NewFile.jsp')
        .then(response => response.json())
        .then(data => {
            data.forEach(item => {
            x.push(item.day);
            y.push(item.temp);
            });
        console.log(x);
        console.log(y); 
    })
   .catch(error => console.error(error));
  }
        

      function drawLineChart(x, y) {
        var ctx = document.getElementById("myChart").getContext("2d");

        var chart = new Chart(ctx, {
          type: "line",
          data: {
            labels: x,
            datasets: [
              {
                label: "Data",
                data: y,
                borderColor: "rgba(1, 1, 1, 1)",
                backgroundColor: "rgba(1, 1, 1, 0)",
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            title: {
              display: true,
              text: "線性圖"
            },
            scales: {
              xAxes: [
                {
                  display: true,
                  scaleLabel: {
                    display: true,
                    labelString: "x"
                  }
                }
              ],
              yAxes: [
                {
                  display: true,
                  scaleLabel: {
                    display: true,
                    labelString: "y"
                  }
                }
              ]
            }
          }
        });
      }
    </script>
  </head> 
  <body>   
    <button type="button" style="width:140px;height:50px" onclick="loadData()">Laad Data</button> 
      
    <button type="button" style="width:140px;height:50px" onclick="drawLineChart(x,y)">Draw Chart</button> 
      
    <canvas id="myChart"></canvas>
  </body>
</html>

